<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dokit: Pokit API Errata</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Dokit<span id="projectnumber">
    <script>
      function changeVersion(event) {
        console.log(event);
        newUrl = `../../${document.getElementById('version').value}/${document.getElementById('visibility').value}/index.html`;
        console.log(`Navigating to ${newUrl}`);
        window.location.assign(newUrl);
      }
    </script>
    <select id="version" autocomplete="off" onchange="changeVersion(event)">
     <option value="main">dev</option>
     <option value="0.5.4">v0.5.4</option>
     <option value="0.5.3">v0.5.3</option>
     <option value="0.5.2" selected>v0.5.2</option>
     <option value="0.5.1">v0.5.1</option>
     <option value="0.5.0">v0.5.0</option>
     <option value="0.4.0">v0.4.0</option>
     <option value="0.3.0">v0.3.0</option>
     <option value="0.2.0">v0.2.0</option>
     <option value="0.1.2">v0.1.2</option>
     <option value="0.1.1">v0.1.1</option>
     <option value="0.1.0">v0.1.0</option>
    </select>
    <select id="visibility" autocomplete="off" onchange="changeVersion(event)">
     <option value="doc">User docs</option>
     <option value="int" selected>Internal</option>
     <option value="cov">Coverage</option>
    </select>
   </span>
   </div>
   <div id="projectbrief">Internal development documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('pokit.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Pokit API Errata</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="reflist">
<dt>Member <a class="el" href="classDataLoggerServicePrivate.html#a774d21863bf83168171143ec8492a736">DataLoggerServicePrivate::encodeSettings</a>  (const <a class="el" href="structDataLoggerService_1_1Settings.html" title="Attributes included in the Settings characterstic.">DataLoggerService::Settings</a> &amp;settings, const bool updateIntervalIs32bit)</dt>
<dd><a class="anchor" id="_pokit000001"></a> For Pokit Meter, <code>updateInterval</code> is <code>uint16</code> seconds (as per the Pokit API 1.00), however for Pokit Pro it's <code>uint32</code> milliseconds, even though that's not officially documented anywhere.  </dd>
<dt>Member <a class="el" href="classDataLoggerServicePrivate.html#aed59b28db53cea0757289a0960bed3fd">DataLoggerServicePrivate::parseMetadata</a>  (const <a class="elRef" href="https://doc.qt.io/qt-5/qbytearray.html">QByteArray</a> &amp;value)</dt>
<dd><a class="anchor" id="_pokit000002"></a> For Pokit Meter, <code>updateInterval</code> is <code>uint16</code> (as per the Pokit API 1.00), however for Pokit Pro it's <code>uint32</code>, even though that's not officially documented anywhere. Also note, the doc claims 'microseconds' (ie 10^-6), but clearly the value is 'milliseconds' (ie 10^-3) for Pokit Pro, and whole seconds for Pokit Meter.  </dd>
<dt>Member <a class="el" href="classDeviceInfoService.html#a006859d13f7c3d7f4179a0ad9cc04213">DeviceInfoService::serialNumber</a>  () const</dt>
<dd><a class="anchor" id="_pokit000003"></a> Unlike other string characteristics, Pokit (Pro) devices always appear to add a trailing <code>null</code> byte to serial number strings. So here we strip any that are present. </dd>
<dt>Member <a class="el" href="classMultimeterService.html#a51f66d0b81dace3115c5c68bc931eaea">MultimeterService::Mode</a>  </dt>
<dd><a class="anchor" id="_pokit000004"></a> The following enumeration values are as-yet undocumented by Pokit Innovations. <a href="https://github.com/pcolby">@pcolby</a> reverse-engineered them as part of the <a href="https://github.com/pcolby/dokit">dokit</a> project.<ul>
<li><a class="el" href="classMultimeterService.html#a51f66d0b81dace3115c5c68bc931eaeaa22bef5ff8cc5db9cc862164e779f29dc" title="Measure capacitance.">Mode::Capacitance</a></li>
<li><a class="el" href="classMultimeterService.html#a51f66d0b81dace3115c5c68bc931eaeaa8d6937c3adb213bd7b7beb575aa17687" title="Measure temperature via an external temperature probe.">Mode::ExternalTemperature</a> </li>
</ul>
</dd>
<dt>Member <a class="el" href="namespacePokitPro.html#adc67ba31bcd650dd7535939e42cec17a">PokitPro::CapacitanceRange</a>  </dt>
<dd><a class="anchor" id="_pokit000005"></a> These Pokit Pro enumeration values are as-yet undocumented by Pokit Innovations. <a href="https://github.com/pcolby">@pcolby</a> reverse-engineered them as part of the <a href="https://github.com/pcolby/dokit">dokit</a> project. </dd>
<dt>Member <a class="el" href="namespacePokitPro.html#ac51059eb5a52fa362da01d4e2f44de21">PokitPro::CurrentRange</a>  </dt>
<dd><a class="anchor" id="_pokit000006"></a> These Pokit Pro enumeration values are as-yet undocumented by Pokit Innovations. <a href="https://github.com/pcolby">@pcolby</a> reverse-engineered them as part of the <a href="https://github.com/pcolby/dokit">dokit</a> project. </dd>
<dt>Member <a class="el" href="namespacePokitPro.html#ac6fedf42d1268613f25da2b7c82832a7">PokitPro::ResistanceRange</a>  </dt>
<dd><a class="anchor" id="_pokit000007"></a> These Pokit Pro enumeration values are as-yet undocumented by Pokit Innovations. <a href="https://github.com/pcolby">@pcolby</a> reverse-engineered them as part of the <a href="https://github.com/pcolby/dokit">dokit</a> project. </dd>
<dt>Member <a class="el" href="namespacePokitPro.html#a68ddba45fec73a3391f241f2da38e78a">PokitPro::VoltageRange</a>  </dt>
<dd><a class="anchor" id="_pokit000008"></a> These Pokit Pro enumeration values are as-yet undocumented by Pokit Innovations. <a href="https://github.com/pcolby">@pcolby</a> reverse-engineered them as part of the <a href="https://github.com/pcolby/dokit">dokit</a> project. </dd>
<dt>Member <a class="el" href="classStatusService.html#a425bf65d42b24c4a621b312fcd152708">StatusService::flashLed</a>  ()</dt>
<dd><a class="anchor" id="_pokit000011"></a> The Android app can turn Pokit Pro LEDs on/off. Perhaps that is handled by an undocumented use of this characteristic. Or perhaps its via some other service. </dd>
<dt>Struct <a class="el" href="structStatusService_1_1ServiceUuids.html">StatusService::ServiceUuids</a>  </dt>
<dd><a class="anchor" id="_pokit000009"></a> Pokit API 1.00 (and 0.02) states the <a class="el" href="structStatusService_1_1Status.html" title="Attributes included in the Status characterstic.">Status</a> Service UUID as <code>57d3a771-267c-4394-8872-78223e92aec4</code> which is correct for the Pokit Meter, but Pokit Pro uses <code>57d3a771-267c-4394-8872-78223e92aec5</code> instead, that is the last digit is a <code>5</code> not <code>4</code>. </dd>
<dt>Member <a class="el" href="classStatusService.html#a6bb2f85b6df9942ee108c341f4162e1f">StatusService::SwitchPosition</a>  </dt>
<dd><a class="anchor" id="_pokit000010"></a> These enum values are undocumented, but easily testable with a physical Pokit Pro device. Internally, Pokit's Android app calls these: <code>SWITCH_MODE_VOLTAGE</code>, <code>SWITCH_MODE_ALL</code> and <code>SWITCH_MODE_CURRENT</code>. </dd>
<dt>Member <a class="el" href="classStatusServicePrivate.html#a90d78c3261bea8f23ddf9804ada203c1">StatusServicePrivate::parseButtonPress</a>  (const <a class="elRef" href="https://doc.qt.io/qt-5/qbytearray.html">QByteArray</a> &amp;value)</dt>
<dd><p class="startdd"><a class="anchor" id="_pokit000013"></a> The button event is the second byte, but no idea what the first byte is. In all examples I've see it's always <code>0x02</code>. It appears that the Pokit Android app only ever looks at <code>bytes[1]</code>.</p>
<p class="enddd"><a class="anchor" id="_pokit000014"></a> Note, we can actually write to the Button Press characteristic too. If we do, then whatever we set as the first byte persists, and (unsurprisingly) the second byte reverts to the current button state. So still no idea what that first byte is for.  </p>
</dd>
<dt>Member <a class="el" href="classStatusServicePrivate.html#a3a6ff8ca3e9d7c884b269e52dd43aeb0">StatusServicePrivate::parseStatus</a>  (const <a class="elRef" href="https://doc.qt.io/qt-5/qbytearray.html">QByteArray</a> &amp;value)</dt>
<dd><a class="anchor" id="_pokit000012"></a> Pokit API 0.02 says the <code>Status</code> characteristic is 5 bytes. API 1.00 then added an additional byte for <code>Battery Status</code>, for 6 bytes in total. However, Pokit Pro devices return 8 bytes here. It appears that the first of those 2 extra bytes (ie the 7th byte) is used to indicate the physical switch position, while the other extra byte (ie the 8th byte) indicates the device's current charging status. </dd>
</dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
